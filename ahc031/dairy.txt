day1
問題を読む。
グリッド上のイベント会場で、パーテーションをつかって複数の部屋に分ける。
これを複数日にわたって行う。
パーテーションの移動を最小化する。
各イベントの面積は決まっているが、どのような長方形でもいい。
指定された面積を下回ったら、ペナルティが発生する。

day2
各日の総面積が0.99を超えるなど結構厳しい制約のシードがある。
イベントの指定面積ちょうどの長方形をつくるのが不可能な場合がある。
縦横を自由に決めれると思ったけど、無駄なく分割するために、シードによってはかなり限られる。
各イベント会場の縦横を決めるとその配置はパッキング問題になる。
すべての日でイベント数は一定なので、まったくパーテーションを動かさないというてもある
面積を満たさないペナルティは、思ったより小さい？
最終曲面で焼きなましはしたいので、できるだけ早く解を出すことが重要。
部屋を分割するという視点でみるとSpace Allocation Problemになる。
Facility Layout Problems 施設レイアウト問題（FLP:Facility Layout Problem）
kd-treeで分割をあらわせないか。１マス１点として、イベントの面積をあらわす。
x,y座標を持つRange treeならどうか
eが小さい時、縦に分割して面積を満たして区切っていくとうまくいくかもしれない。

長方形の充填問題を含む各種切出し・ 充填問題の分類は W ̈ascher らの論文が詳しい 
[2] G. W ̈ascher, H. Haußner and H. Schumann, “An im- proved typology of cutting and packing problems,” Eu- ropean Journal of Operational Research, 183, 1109– 1130, 2007.
長方形のストリップパッキング問 題に対する厳密解法を研究しており，その中で階段状 に長方形を配置するアルゴリズム
https://core.ac.uk/download/pdf/234560095.pdf 
Heuristics and Metaheuristics Approaches for Facility Layout Problems:A Survey

day3
休日

day4
テスターのスコア計算コードをよむ。RustのBTreeMapを使っている。
解法アイデア
- グリッドを縦に分割して、面積を満たすように部屋を分割していく
- 縦の線を共有することでスコアを上げる

実装方針
まず、1日目の部屋の配置を決める。
- その日の最も大きなイベントを基準に、縦に分割していく
    1. (全ての日で）1番大きなイベントのサイズ/1000を基準にする
    2. (全ての日で) ２番目に大きなイベントのサイズ/1000を基準にする
    3. 以降はランダム？
    4. イベントごとに、


2024/03/28
3,447,116,257
目標コストは現在の0.0689倍にしないといけない

高機能順位表の使い方
standingのディレクトリで、 python3 -m http.Server
http://localhost:8000/index.html?=contests=ahc031 にブラウザでアクセス

現状、1000*1000からはみでることを許容しているけど、これだとWAになるので、むりやり（hight=1)おさめる

# AHCラジオメモ
大きさは指数分布
入力生成方法からわかる特徴
- 面積の作り方。
    - eが小さいときは、どれだけ壁を共有できるか
    - eが大きいとき、空きスペースが小さいので、どれだけ上手く分割できるか
    - わりきって、二つの方法でかんがえる
1日目のコストは０なので壁はあったほうがいい
縦の壁をなんこもつくって、貪欲法でやる
(問題を分割してとくとき、小問題は貪欲にして、大問題を焼きなましのようにしたほうがいい)
縦の壁をつくってから、それをもとに次の解を作る
縦の壁を新たに作る、縦の壁を横にずらす、縦の壁を消す
大問題と小問題どちらも局所改善することもできる
小問題を解く時の貪欲法解　大きなアイテムをいくつかを取り除いて、ひとついれて、ひとつまた取り除く
短冊の最後の2こを縦にする
横の線は上下移動で焼き鈍して、たまたまあたればいい
それぞれの縦の長方形で、余裕がどのていどあるか
一つの短冊のなかで、入れ替えをする
アイテムをどこにいれるかを決めていない。ー＞面積をソートして、大きいものから入れていくので一意に決まる
軽い評価関数で反復数を増やす方が成績がいいのはAHCあるある